# ğŸ—ï¸ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠ - Baseer

## ğŸ“‹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙˆØ«ÙŠÙ‚Ø©

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù‚ÙŠÙ…Ø© |
|-------|--------|
| **Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹** | Baseer - Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø§Ù„ÙŠ Ø§Ù„Ø°ÙƒÙŠ |
| **Ø§Ù„Ø¥ØµØ¯Ø§Ø±** | 1.0.0 |
| **Ø§Ù„ØªØ§Ø±ÙŠØ®** | 21 Ø£ÙƒØªÙˆØ¨Ø± 2025 |
| **Ø§Ù„Ù…Ø¤Ù„Ù** | ÙØ±ÙŠÙ‚ Ø§Ù„ØªØ·ÙˆÙŠØ± |
| **Ø§Ù„Ø­Ø§Ù„Ø©** | Ù…Ø³ÙˆØ¯Ø© Ø£ÙˆÙ„ÙŠØ© |
| **Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©** | v1.0 |

---

## ğŸ¯ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ù…Ø¹Ù…Ø§Ø±ÙŠØ©

### Ø§Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©
Baseer Ù‡Ùˆ Ù†Ø¸Ø§Ù… ØªØ´ØºÙŠÙ„ Ù…Ø§Ù„ÙŠ Ø°ÙƒÙŠ Ù…ØªÙƒØ§Ù…Ù„ Ù…ØµÙ…Ù… Ù„Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©ØŒ ÙŠØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ø´Ø®ØµÙŠ ÙˆÙ…Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù….

### Ø§Ù„Ù…Ø¨Ø§Ø¯Ø¦ Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©
1. **Microservices Architecture** - Ø®Ø¯Ù…Ø§Øª Ù…Ù†ÙØµÙ„Ø© ÙˆÙ‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªÙˆØ³Ø¹
2. **Domain-Driven Design** - ØªØµÙ…ÙŠÙ… Ù…Ø¯ÙÙˆØ¹ Ø¨Ø§Ù„Ù…Ø¬Ø§Ù„
3. **Event-Driven Architecture** - Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ù…Ø¯ÙÙˆØ¹Ø© Ø¨Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
4. **API-First Design** - ØªØµÙ…ÙŠÙ… API Ø£ÙˆÙ„Ø§Ù‹
5. **Security by Design** - Ø§Ù„Ø£Ù…Ø§Ù† ÙÙŠ Ø§Ù„ØªØµÙ…ÙŠÙ…
6. **Scalability** - Ù‚Ø§Ø¨Ù„ÙŠØ© Ø§Ù„ØªÙˆØ³Ø¹ Ø§Ù„Ø£ÙÙ‚ÙŠ ÙˆØ§Ù„Ø¹Ù…ÙˆØ¯ÙŠ

---

## ğŸ›ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ø§Ù„Ø¹Ø§Ù…Ø©

### 1. Ø·Ø¨Ù‚Ø© Ø§Ù„Ø¹Ø±Ø¶ (Presentation Layer)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Frontend Layer             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Flutter Mobile App  â”‚  Web Dashboard   â”‚
â”‚  - iOS & Android     â”‚  - Admin Panel   â”‚
â”‚  - Material Design  â”‚  - Analytics     â”‚
â”‚  - Offline Support  â”‚  - Reports       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Ø·Ø¨Ù‚Ø© API Gateway
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              API Gateway                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - Authentication & Authorization       â”‚
â”‚  - Rate Limiting & Throttling          â”‚
â”‚  - Request Routing & Load Balancing    â”‚
â”‚  - API Versioning & Documentation      â”‚
â”‚  - Monitoring & Logging                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Ø·Ø¨Ù‚Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª (Services Layer)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Microservices Layer          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Auth Service    â”‚  Invoice Service    â”‚
â”‚  User Service    â”‚  OCR Service        â”‚
â”‚  Customer Serviceâ”‚  Analytics Service  â”‚
â”‚  Payment Service â”‚  Notification Svc   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. Ø·Ø¨Ù‚Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Data Layer)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Data Layer                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PostgreSQL      â”‚  Redis Cache        â”‚
â”‚  - Users         â”‚  - Sessions         â”‚
â”‚  - Invoices      â”‚  - API Cache         â”‚
â”‚  - Customers     â”‚  - Rate Limiting    â”‚
â”‚  - Transactions  â”‚  - Real-time Data   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. Ø·Ø¨Ù‚Ø© Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© (Infrastructure Layer)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Infrastructure Layer           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AWS Services    â”‚  Monitoring         â”‚
â”‚  - EC2/ECS       â”‚  - Prometheus       â”‚
â”‚  - RDS           â”‚  - Grafana          â”‚
â”‚  - ElastiCache   â”‚  - ELK Stack        â”‚
â”‚  - S3            â”‚  - Sentry           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©

### Frontend Architecture (Flutter)

#### 1. Clean Architecture Pattern
```
lib/
â”œâ”€â”€ core/                    # Ø§Ù„Ø·Ø¨Ù‚Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
â”‚   â”œâ”€â”€ constants/          # Ø§Ù„Ø«ÙˆØ§Ø¨Øª Ø§Ù„Ø¹Ø§Ù…Ø©
â”‚   â”œâ”€â”€ theme/              # Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµÙ…ÙŠÙ…
â”‚   â”œâ”€â”€ utils/              # Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
â”‚   â”œâ”€â”€ network/            # Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ø¨ÙƒØ©
â”‚   â”œâ”€â”€ error/              # Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
â”‚   â””â”€â”€ extensions/         # Ø§Ù…ØªØ¯Ø§Ø¯Ø§Øª Dart
â”œâ”€â”€ features/                # Ø·Ø¨Ù‚Ø© Ø§Ù„Ù…ÙŠØ²Ø§Øª
â”‚   â”œâ”€â”€ auth/               # Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
â”‚   â”‚   â”œâ”€â”€ data/           # Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
â”‚   â”‚   â”œâ”€â”€ domain/         # Ù…Ù†Ø·Ù‚ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„
â”‚   â”‚   â””â”€â”€ presentation/   # ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
â”‚   â”œâ”€â”€ dashboard/          # Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
â”‚   â”œâ”€â”€ invoices/           # Ø§Ù„ÙÙˆØ§ØªÙŠØ±
â”‚   â”œâ”€â”€ expenses/           # Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª
â”‚   â”œâ”€â”€ customers/          # Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
â”‚   â””â”€â”€ ocr/               # Ù…Ø³Ø­ Ø§Ù„Ø¥ÙŠØµØ§Ù„Ø§Øª
â”œâ”€â”€ shared/                  # Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø´ØªØ±ÙƒØ©
â”‚   â”œâ”€â”€ widgets/            # Ø¹Ù†Ø§ØµØ± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
â”‚   â”œâ”€â”€ models/             # Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
â”‚   â”œâ”€â”€ services/           # Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ø´ØªØ±ÙƒØ©
â”‚   â””â”€â”€ repositories/       # Ù…Ø³ØªÙˆØ¯Ø¹Ø§Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
â””â”€â”€ main.dart               # Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
```

#### 2. State Management (Riverpod)
```dart
// Provider Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª
final userProvider = StateNotifierProvider<UserNotifier, UserState>((ref) {
  return UserNotifier(ref.read(userRepository));
});

// Provider Ù„Ù„Ø®Ø¯Ù…Ø§Øª
final apiServiceProvider = Provider<ApiService>((ref) {
  return ApiService(ref.read(dioProvider));
});
```

### Backend Architecture (Go)

#### 1. Clean Architecture Pattern
```
backend/
â”œâ”€â”€ cmd/                     # Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
â”‚   â”œâ”€â”€ main.go             # Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
â”‚   â””â”€â”€ migrate/            # Ù‡Ø¬Ø±Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
â”œâ”€â”€ internal/                # Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ
â”‚   â”œâ”€â”€ domain/              # Ø·Ø¨Ù‚Ø© Ø§Ù„Ù…Ø¬Ø§Ù„
â”‚   â”‚   â”œâ”€â”€ entities/        # Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª
â”‚   â”‚   â”œâ”€â”€ repositories/    # ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹Ø§Øª
â”‚   â”‚   â””â”€â”€ services/        # Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ø¬Ø§Ù„
â”‚   â”œâ”€â”€ infrastructure/      # Ø·Ø¨Ù‚Ø© Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ©
â”‚   â”‚   â”œâ”€â”€ database/        # Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
â”‚   â”‚   â”œâ”€â”€ cache/           # Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª
â”‚   â”‚   â”œâ”€â”€ storage/         # ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ù„ÙØ§Øª
â”‚   â”‚   â””â”€â”€ external/        # Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©
â”‚   â”œâ”€â”€ application/         # Ø·Ø¨Ù‚Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
â”‚   â”‚   â”œâ”€â”€ handlers/        # Ù…Ø¹Ø§Ù„Ø¬Ø§Øª HTTP
â”‚   â”‚   â”œâ”€â”€ middleware/      # Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª Ø§Ù„ÙˆØ³Ø·ÙŠØ©
â”‚   â”‚   â”œâ”€â”€ dto/             # ÙƒØ§Ø¦Ù†Ø§Øª Ù†Ù‚Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
â”‚   â”‚   â””â”€â”€ usecases/        # Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
â”‚   â””â”€â”€ config/              # Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
â”œâ”€â”€ pkg/                     # Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ù…Ø´ØªØ±ÙƒØ©
â”‚   â”œâ”€â”€ utils/               # Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
â”‚   â”œâ”€â”€ logger/              # Ù†Ø¸Ø§Ù… Ø§Ù„Ø³Ø¬Ù„Ø§Øª
â”‚   â”œâ”€â”€ validator/           # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
â”‚   â””â”€â”€ crypto/              # Ø§Ù„ØªØ´ÙÙŠØ±
â””â”€â”€ migrations/              # Ù‡Ø¬Ø±Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
```

#### 2. Microservices Structure
```
services/
â”œâ”€â”€ auth-service/            # Ø®Ø¯Ù…Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
â”œâ”€â”€ user-service/            # Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
â”œâ”€â”€ invoice-service/         # Ø®Ø¯Ù…Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ±
â”œâ”€â”€ customer-service/        # Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
â”œâ”€â”€ ocr-service/            # Ø®Ø¯Ù…Ø© OCR
â”œâ”€â”€ payment-service/         # Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª
â”œâ”€â”€ analytics-service/       # Ø®Ø¯Ù…Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª
â””â”€â”€ notification-service/    # Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
```

---

## ğŸ—„ï¸ ØªØµÙ…ÙŠÙ… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### PostgreSQL Schema Design

#### 1. Users Table
```sql
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL,
    phone VARCHAR(20),
    business_name VARCHAR(200),
    business_type VARCHAR(50),
    tax_number VARCHAR(15),
    cr_number VARCHAR(10),
    subscription_plan VARCHAR(20) DEFAULT 'free',
    subscription_status VARCHAR(20) DEFAULT 'active',
    email_verified BOOLEAN DEFAULT FALSE,
    phone_verified BOOLEAN DEFAULT FALSE,
    two_factor_enabled BOOLEAN DEFAULT FALSE,
    last_login TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 2. Invoices Table
```sql
CREATE TABLE invoices (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id),
    customer_id UUID NOT NULL REFERENCES customers(id),
    invoice_number VARCHAR(50) UNIQUE NOT NULL,
    invoice_type VARCHAR(20) DEFAULT 'standard',
    status VARCHAR(20) DEFAULT 'draft',
    issue_date DATE NOT NULL,
    due_date DATE NOT NULL,
    subtotal DECIMAL(15,2) NOT NULL,
    tax_amount DECIMAL(15,2) DEFAULT 0,
    discount_amount DECIMAL(15,2) DEFAULT 0,
    total_amount DECIMAL(15,2) NOT NULL,
    currency VARCHAR(3) DEFAULT 'SAR',
    payment_method VARCHAR(50),
    payment_status VARCHAR(20) DEFAULT 'unpaid',
    paid_amount DECIMAL(15,2) DEFAULT 0,
    paid_date TIMESTAMP,
    payment_reference VARCHAR(100),
    zatca_uuid VARCHAR(100),
    zatca_hash VARCHAR(255),
    qr_code TEXT,
    xml_content TEXT,
    notes TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 3. Invoice Items Table
```sql
CREATE TABLE invoice_items (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    invoice_id UUID NOT NULL REFERENCES invoices(id),
    item_name VARCHAR(200) NOT NULL,
    description TEXT,
    quantity DECIMAL(10,3) NOT NULL,
    unit_price DECIMAL(15,2) NOT NULL,
    discount DECIMAL(5,2) DEFAULT 0,
    discount_type VARCHAR(20) DEFAULT 'percentage',
    tax_rate DECIMAL(5,2) DEFAULT 15,
    line_total DECIMAL(15,2) NOT NULL,
    discount_amount DECIMAL(15,2) DEFAULT 0,
    tax_amount DECIMAL(15,2) DEFAULT 0,
    total_amount DECIMAL(15,2) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 4. Customers Table
```sql
CREATE TABLE customers (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id),
    name VARCHAR(200) NOT NULL,
    email VARCHAR(255),
    phone VARCHAR(20),
    address TEXT,
    city VARCHAR(100),
    region VARCHAR(100),
    postal_code VARCHAR(20),
    country VARCHAR(2) DEFAULT 'SA',
    tax_number VARCHAR(15),
    cr_number VARCHAR(10),
    customer_type VARCHAR(20) DEFAULT 'individual',
    notes TEXT,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 5. Expenses Table
```sql
CREATE TABLE expenses (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id),
    amount DECIMAL(15,2) NOT NULL,
    currency VARCHAR(3) DEFAULT 'SAR',
    category VARCHAR(100) NOT NULL,
    subcategory VARCHAR(100),
    description TEXT,
    expense_date DATE NOT NULL,
    merchant_name VARCHAR(200),
    receipt_image_url TEXT,
    ocr_data JSONB,
    tags TEXT[],
    is_business BOOLEAN DEFAULT FALSE,
    is_recurring BOOLEAN DEFAULT FALSE,
    recurring_frequency VARCHAR(20),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### Redis Cache Design

#### 1. Session Management
```
Key Pattern: session:{user_id}
TTL: 7 days
Value: {
    "user_id": "uuid",
    "email": "user@example.com",
    "plan": "premium",
    "permissions": ["read", "write"],
    "last_activity": "timestamp"
}
```

#### 2. API Rate Limiting
```
Key Pattern: rate_limit:{ip_address}:{endpoint}
TTL: 1 hour
Value: {
    "count": 100,
    "window_start": "timestamp",
    "limit": 1000
}
```

#### 3. Cache for Frequently Accessed Data
```
Key Pattern: cache:{data_type}:{id}
TTL: 1 hour
Value: JSON data
```

---

## ğŸ”’ ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£Ù…Ø§Ù†

### 1. Authentication & Authorization

#### JWT Token Structure
```json
{
    "header": {
        "alg": "RS256",
        "typ": "JWT"
    },
    "payload": {
        "sub": "user_id",
        "email": "user@example.com",
        "plan": "premium",
        "permissions": ["read", "write", "admin"],
        "iat": 1640995200,
        "exp": 1641600000,
        "jti": "token_id"
    }
}
```

#### Permission System
```go
type Permission string

const (
    PermissionReadInvoices    Permission = "invoices:read"
    PermissionWriteInvoices   Permission = "invoices:write"
    PermissionDeleteInvoices  Permission = "invoices:delete"
    PermissionReadCustomers   Permission = "customers:read"
    PermissionWriteCustomers  Permission = "customers:write"
    PermissionReadExpenses    Permission = "expenses:read"
    PermissionWriteExpenses   Permission = "expenses:write"
    PermissionAdminAccess     Permission = "admin:access"
)
```

### 2. Data Encryption

#### Encryption at Rest
- **Database**: AES-256 encryption for sensitive fields
- **File Storage**: S3 server-side encryption
- **Backups**: Encrypted backups with separate keys

#### Encryption in Transit
- **HTTPS**: TLS 1.3 for all communications
- **Database**: SSL/TLS connections
- **Internal Services**: mTLS for service-to-service communication

### 3. Security Headers
```go
func SecurityHeaders() gin.HandlerFunc {
    return func(c *gin.Context) {
        c.Header("X-Content-Type-Options", "nosniff")
        c.Header("X-Frame-Options", "DENY")
        c.Header("X-XSS-Protection", "1; mode=block")
        c.Header("Strict-Transport-Security", "max-age=31536000; includeSubDomains")
        c.Header("Content-Security-Policy", "default-src 'self'")
        c.Header("Referrer-Policy", "strict-origin-when-cross-origin")
        c.Next()
    }
}
```

---

## ğŸ“Š ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© ÙˆØ§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©

### 1. Metrics Collection

#### Application Metrics
```go
type Metrics struct {
    HTTPRequestsTotal    prometheus.CounterVec
    HTTPRequestDuration  prometheus.HistogramVec
    ActiveConnections    prometheus.Gauge
    DatabaseConnections  prometheus.Gauge
    CacheHitRate         prometheus.Gauge
    ErrorRate            prometheus.CounterVec
}
```

#### Business Metrics
```go
type BusinessMetrics struct {
    InvoicesCreated      prometheus.Counter
    InvoicesPaid         prometheus.Counter
    OCRScansProcessed    prometheus.Counter
    OCRAccuracy          prometheus.Gauge
    UserRegistrations    prometheus.Counter
    ActiveUsers          prometheus.Gauge
}
```

### 2. Logging Strategy

#### Structured Logging
```go
type LogEntry struct {
    Timestamp   time.Time              `json:"timestamp"`
    Level       string                 `json:"level"`
    Service     string                 `json:"service"`
    Message     string                 `json:"message"`
    UserID      string                 `json:"user_id,omitempty"`
    RequestID   string                 `json:"request_id,omitempty"`
    Duration    int64                  `json:"duration_ms,omitempty"`
    Fields      map[string]interface{} `json:"fields,omitempty"`
}
```

### 3. Health Checks

#### Service Health Endpoints
```go
type HealthStatus struct {
    Status    string            `json:"status"`
    Timestamp time.Time         `json:"timestamp"`
    Services  map[string]string `json:"services"`
    Version   string            `json:"version"`
    Uptime    string            `json:"uptime"`
}
```

---

## ğŸš€ ØªØµÙ…ÙŠÙ… Ø§Ù„Ù†Ø´Ø± ÙˆØ§Ù„ØªÙˆØ³Ø¹

### 1. Container Strategy

#### Dockerfile for Backend
```dockerfile
FROM golang:1.21-alpine AS builder

WORKDIR /app
COPY go.mod go.sum ./
RUN go mod download

COPY . .
RUN CGO_ENABLED=0 GOOS=linux go build -o main cmd/main.go

FROM alpine:latest
RUN apk --no-cache add ca-certificates
WORKDIR /root/
COPY --from=builder /app/main .
EXPOSE 8080
CMD ["./main"]
```

#### Dockerfile for Frontend
```dockerfile
FROM node:18-alpine AS builder

WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=builder /app/build /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

### 2. Kubernetes Deployment

#### Backend Deployment
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: baseer-backend
spec:
  replicas: 3
  selector:
    matchLabels:
      app: baseer-backend
  template:
    metadata:
      labels:
        app: baseer-backend
    spec:
      containers:
      - name: backend
        image: baseer/backend:latest
        ports:
        - containerPort: 8080
        env:
        - name: DB_HOST
          valueFrom:
            secretKeyRef:
              name: db-secret
              key: host
        resources:
          requests:
            memory: "256Mi"
            cpu: "250m"
          limits:
            memory: "512Mi"
            cpu: "500m"
```

### 3. Auto-scaling Configuration
```yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: baseer-backend-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: baseer-backend
  minReplicas: 3
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80
```

---

## ğŸ“ˆ ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†

### 1. Database Optimization

#### Indexing Strategy
```sql
-- User queries optimization
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_subscription ON users(subscription_plan, subscription_status);

-- Invoice queries optimization
CREATE INDEX idx_invoices_user_date ON invoices(user_id, issue_date DESC);
CREATE INDEX idx_invoices_status ON invoices(status);
CREATE INDEX idx_invoices_due_date ON invoices(due_date) WHERE status IN ('sent', 'viewed');

-- Customer queries optimization
CREATE INDEX idx_customers_user ON customers(user_id);
CREATE INDEX idx_customers_name ON customers(name);

-- Expense queries optimization
CREATE INDEX idx_expenses_user_date ON expenses(user_id, expense_date DESC);
CREATE INDEX idx_expenses_category ON expenses(category);
```

#### Query Optimization
```sql
-- Optimized invoice listing query
SELECT 
    i.id,
    i.invoice_number,
    i.total_amount,
    i.status,
    i.issue_date,
    c.name as customer_name
FROM invoices i
JOIN customers c ON i.customer_id = c.id
WHERE i.user_id = $1
ORDER BY i.issue_date DESC
LIMIT $2 OFFSET $3;
```

### 2. Caching Strategy

#### Application-Level Caching
```go
type CacheManager struct {
    redis  *redis.Client
    local  *cache.Cache
    config CacheConfig
}

func (cm *CacheManager) Get(key string) (interface{}, error) {
    // Try local cache first
    if value, found := cm.local.Get(key); found {
        return value, nil
    }
    
    // Try Redis cache
    value, err := cm.redis.Get(context.Background(), key).Result()
    if err == nil {
        cm.local.Set(key, value, cm.config.LocalTTL)
        return value, nil
    }
    
    return nil, err
}
```

### 3. API Optimization

#### Response Compression
```go
func CompressionMiddleware() gin.HandlerFunc {
    return gin.HandlerFunc(func(c *gin.Context) {
        if strings.Contains(c.GetHeader("Accept-Encoding"), "gzip") {
            c.Header("Content-Encoding", "gzip")
            c.Header("Vary", "Accept-Encoding")
            
            gz := gzip.NewWriter(c.Writer)
            defer gz.Close()
            
            c.Writer = &gzipWriter{c.Writer, gz}
        }
        c.Next()
    })
}
```

---

## ğŸ”„ ØªØµÙ…ÙŠÙ… Ø§Ù„ØªÙƒØ§Ù…Ù„ ÙˆØ§Ù„Ø§ØªØµØ§Ù„

### 1. API Gateway Configuration

#### Rate Limiting
```go
type RateLimiter struct {
    redis  *redis.Client
    config RateLimitConfig
}

func (rl *RateLimiter) Allow(key string) (bool, error) {
    script := `
        local key = KEYS[1]
        local limit = tonumber(ARGV[1])
        local window = tonumber(ARGV[2])
        local current = redis.call('GET', key)
        
        if current == false then
            redis.call('SET', key, 1)
            redis.call('EXPIRE', key, window)
            return 1
        end
        
        if tonumber(current) < limit then
            return redis.call('INCR', key)
        else
            return 0
        end
    `
    
    result, err := rl.redis.Eval(context.Background(), script, []string{key}, rl.config.Limit, rl.config.Window).Result()
    return result.(int64) > 0, err
}
```

### 2. Service Communication

#### Event-Driven Architecture
```go
type Event struct {
    ID        string                 `json:"id"`
    Type      string                 `json:"type"`
    Source    string                 `json:"source"`
    Data      map[string]interface{} `json:"data"`
    Timestamp time.Time              `json:"timestamp"`
    Version   string                 `json:"version"`
}

type EventBus interface {
    Publish(ctx context.Context, event Event) error
    Subscribe(ctx context.Context, eventType string, handler EventHandler) error
}
```

### 3. External Integrations

#### ZATCA Integration
```go
type ZATCAClient struct {
    baseURL    string
    apiKey     string
    httpClient *http.Client
}

func (z *ZATCAClient) SubmitInvoice(invoice *Invoice) (*ZATCAResponse, error) {
    xmlData := z.generateXML(invoice)
    hash := z.generateHash(xmlData)
    
    payload := ZATCAPayload{
        InvoiceHash: hash,
        InvoiceXML:  xmlData,
        UUID:        invoice.ZATCAUUID,
    }
    
    return z.submitToZATCA(payload)
}
```

---

## ğŸ“‹ Ù…Ù„Ø®Øµ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠ

### Ø§Ù„Ù…Ø¨Ø§Ø¯Ø¦ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
1. **Scalability**: Ù‚Ø§Ø¨Ù„ÙŠØ© Ø§Ù„ØªÙˆØ³Ø¹ Ø§Ù„Ø£ÙÙ‚ÙŠ ÙˆØ§Ù„Ø¹Ù…ÙˆØ¯ÙŠ
2. **Reliability**: Ù…ÙˆØ«ÙˆÙ‚ÙŠØ© Ø¹Ø§Ù„ÙŠØ© Ù…Ø¹ Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø³Ø±ÙŠØ¹
3. **Security**: Ø£Ù…Ø§Ù† Ø´Ø§Ù…Ù„ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª
4. **Performance**: Ø£Ø¯Ø§Ø¡ Ø¹Ø§Ù„ÙŠ Ù…Ø¹ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø³Ø±ÙŠØ¹Ø©
5. **Maintainability**: Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø© ÙˆØ§Ù„ØªØ·ÙˆÙŠØ±
6. **Observability**: Ù…Ø±Ø§Ù‚Ø¨Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ØµØ­Ø©

### Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©
- **Frontend**: Flutter 3.16.0 + Riverpod
- **Backend**: Go 1.21 + Gin Framework
- **Database**: PostgreSQL 15 + Redis 7.2
- **Infrastructure**: AWS + Kubernetes
- **Monitoring**: Prometheus + Grafana
- **Security**: JWT + TLS 1.3 + Encryption

### Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ù†Ø¬Ø§Ø­
- **Response Time**: < 100ms Ù„Ù„Ù€ API
- **Uptime**: 99.9%+ availability
- **Scalability**: Ø¯Ø¹Ù… 100K+ Ù…Ø³ØªØ®Ø¯Ù… Ù…ØªØ²Ø§Ù…Ù†
- **Security**: Zero security incidents
- **Performance**: < 3s app launch time

---

**Ù‡Ø°Ø§ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠ ÙŠØ¶Ù…Ù† Ø¨Ù†Ø§Ø¡ Ù†Ø¸Ø§Ù… Ù‚ÙˆÙŠØŒ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙˆØ³Ø¹ØŒ ÙˆØ¢Ù…Ù† Ù„Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©.** ğŸš€
